è®¿é—®è€…æ¨¡å¼
    1.å®šä¹‰
        å°†ä½œç”¨äºæŸç§æ•°æ®ç»“æ„ä¸­çš„å„å…ƒç´ çš„æ“ä½œåˆ†ç¦»å‡ºæ¥å°è£…æˆç‹¬ç«‹çš„ç±»ï¼Œä½¿å…¶åœ¨ä¸æ”¹å˜æ•°æ®ç»“æ„çš„å‰æä¸‹å¯ä»¥æ·»åŠ ä½œç”¨äºè¿™äº›å…ƒç´ çš„æ–°çš„æ“ä½œï¼Œä¸ºæ•°æ®ç»“æ„ä¸­çš„æ¯ä¸ªå…ƒç´ æä¾›å¤šç§è®¿é—®æ–¹å¼ã€‚
    2.ä¼˜ç¼ºç‚¹
    ï¼ˆ1ï¼‰ä¼˜ç‚¹ï¼š
        æ‰©å±•æ€§å¥½ï¼Œèƒ½å¤Ÿåœ¨ä¸ä¿®æ”¹å¯¹è±¡ç»“æ„ä¸­çš„å…ƒç´ çš„æƒ…å†µä¸‹ï¼Œä¸ºå¯¹è±¡ç»“æ„ä¸­çš„å…ƒç´ æ·»åŠ æ–°çš„åŠŸèƒ½ã€‚
        å¤ç”¨æ€§å¥½ï¼Œå¯ä»¥é€šè¿‡è®¿é—®è€…æ¥å®šä¹‰æ•´ä¸ªå¯¹è±¡ç»“æ„é€šç”¨çš„åŠŸèƒ½ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„å¤ç”¨ç¨‹åº¦ã€‚
        çµæ´»æ€§å¥½ï¼Œå°†æ•°æ®ç»“æ„ä¸ä½œç”¨äºç»“æ„ä¸Šçš„æ“ä½œè§£è€¦ï¼Œä½¿å¾—æ“ä½œé›†åˆå¯ç›¸å¯¹è‡ªç”±åœ°æ¼”åŒ–è€Œä¸å½±å“ç³»ç»Ÿçš„æ•°æ®ç»“æ„ã€‚
        ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™ï¼Œè®¿é—®è€…æ¨¡å¼æŠŠç›¸å…³çš„è¡Œä¸ºå°è£…åœ¨ä¸€èµ·ï¼Œæ„æˆä¸€ä¸ªè®¿é—®è€…ï¼Œä½¿æ¯ä¸€ä¸ªè®¿é—®è€…çš„åŠŸèƒ½éƒ½æ¯”è¾ƒå•ä¸€ã€‚
    ï¼ˆ2ï¼‰ç¼ºç‚¹ï¼š
        å¢åŠ æ–°çš„å…ƒç´ ç±»å¾ˆå›°éš¾ï¼Œæ¯å¢åŠ ä¸€ä¸ªæ–°çš„å…ƒç´ ç±»ï¼Œéƒ½è¦åœ¨æ¯ä¸€ä¸ªå…·ä½“è®¿é—®ç±»ä¸­å¢åŠ ç›¸åº”çš„å…·ä½“æ“ä½œã€‚
        å…·ä½“å…ƒç´ å¯¹è®¿é—®è€…å…¬å¸ƒç»†èŠ‚ï¼Œç ´åäº†å¯¹è±¡çš„å°è£…æ€§ã€‚
    3.ç»“æ„
    ï¼ˆ1ï¼‰æŠ½è±¡è®¿é—®è€…ï¼šå®šä¹‰ä¸€ä¸ªè®¿é—®å…·ä½“å…ƒç´ çš„æ¥å£ï¼Œä¸ºæ¯ä¸ªå…·ä½“å…ƒç´ ç±»å¯¹åº”ä¸€ä¸ªè®¿é—®æ“ä½œï¼Œè¯¥æ“ä½œä¸­çš„å‚æ•°ç±»å‹æ ‡è¯†ç ´åäº†è¢«è®¿é—®çš„å…·ä½“å…ƒç´ ã€‚
    ï¼ˆ2ï¼‰å…·ä½“è®¿é—®è€…ï¼šå®ç°æŠ½è±¡è®¿é—®è§’è‰²ä¸­å£°æ˜çš„å„ä¸ªè®¿é—®æ“ä½œï¼Œç¡®å®šè®¿é—®è€…è®¿é—®ä¸€ä¸ªå…ƒç´ æ—¶è¯¥åšä»€ä¹ˆã€‚
    ï¼ˆ3ï¼‰æŠ½è±¡å…ƒç´ ï¼šå£°æ˜ä¸€ä¸ªåŒ…å«æ¥å—æ“ä½œaccept()çš„æ¥å£ï¼Œè¢«æ¥å—çš„è®¿é—®è€…å¯¹è±¡ä½œä¸ºaccept()æ–¹æ³•çš„å‚æ•°ã€‚
    ï¼ˆ4ï¼‰å…·ä½“å…ƒç´ ï¼šå®ç°æŠ½è±¡å…ƒç´ è§’è‰²æä¾›çš„accept()æ“ä½œï¼Œå…¶æ–¹æ³•ä½“é€šå¸¸éƒ½æ˜¯visitor.visit(this)ï¼Œå¦å¤–å…·ä½“å…ƒç´ ä¸­å¯èƒ½è¿˜åŒ…å«æœ¬èº«ä¸šåŠ¡é€»è¾‘çš„ç›¸å…³æ“ä½œã€‚
    ï¼ˆ5ï¼‰å¯¹è±¡ç»“æ„ï¼šæ˜¯ä¸€ä¸ªåŒ…å«å…ƒç´ è§’è‰²çš„å®¹å™¨ï¼Œæä¾›è®©è®¿é—®è€…å¯¹è±¡éå†å®¹å™¨ä¸­çš„æ‰€æœ‰å…ƒç´ çš„æ–¹æ³•ï¼Œé€šå¸¸ç”±Listã€Setã€Mapç­‰èšåˆç±»å®ç°ã€‚
    4.å®ç°
    //æŠ½è±¡è®¿é—®è€…
    interface Visitor {
        void visit(ConcreteElementA element);

        void visit(ConcreteElementB element);
    }

    //å…·ä½“è®¿é—®è€…A
    class ConcreteVisitorA implements Visitor {
        public void visit (ConcreteElementA element){
            System.out.println("å…·ä½“è®¿é—®è€…Aè®¿é—®"+element.operationA());
        }

        public void visit (ConcreteElementB element){
            System.out.println("å…·ä½“è®¿é—®è€…Bè®¿é—®"+element.operationB());
        }
    }

     //å…·ä½“è®¿é—®è€…B
    class ConcreteVisitorB implements Visitor {
        public void visit (ConcreteElementA element){
            System.out.println("å…·ä½“è®¿é—®è€…Aè®¿é—®"+element.operationA());
        }

        public void visit (ConcreteElementB element){
            System.out.println("å…·ä½“è®¿é—®è€…Bè®¿é—®"+element.operationB());
        }
    }

    //æŠ½è±¡å…ƒç´ ç±»
    interface Element {
        void accept(Visitor visitor);
    }

    //å…·ä½“å…ƒç´ 
    class ConcreteElementA implements Element {
        public void accept(Visitor visitor){
            visitor.visit(this);
        }

        public String operationA(){
            return "å…·ä½“å…ƒç´ Açš„æ“ä½œ";
        }
    }

    //å…·ä½“å…ƒç´ 
    class ConcreteElementB implements Element {
        public void accept(Visitor visitor){
            visitor.visit(this);
        }

        public String operationB(){
            return "å…·ä½“å…ƒç´ Bçš„æ“ä½œ";
        }
    }

    //å¯¹è±¡ç»“æ„è§’è‰²
    class ObjectStructure {
        private List<Element> list = new ArrayList<Element>();

        public void accept(Visitor visitor){
            Iterator<Element> i = list.iterator();
            while(i.hasNext()){
                ((Element)i.next()).accept(visitor);
            }
        }

        public void add(Element element){
            list.add(element);
        }

        public void remove(Element element){
            list.remove(element);
        }
    }

    public class VisitorPattern {
        public static void main(String[] args){
            ObjectStructure os = new ObjectStructure();
            os.add(new ConcreteElementA());
            os.add(new ConcreteElementB());
            Visitor visitor = new ConcreteVisitorA();
            os.accept(visitor);
            System.out.println("-----------");
            visitor = new ConcreteVisitorB();
            os.accept(visitor);
        }
    }

    5.ä¾‹å­ğŸŒ°ï¼š
    public interface Element{
        void accept(Visitor visitor);
    }

    class CustomerGroup{
        private List<Customer> customers = new ArrayList<>();

        void accept(Visitor visitor){
            for(Customer customer : customers){
                customer.accept(visitor);
            }
        }
        
        void addCustomer(Customer customer) {
            customers.add(customer);
        }
    }

    public class Customer implements Element{
        private String name;

        private List<Order> orders = new ArrayList<>();

        Customer(String name){
            this.name = name;
        }

        String getName(){
            return name;
        }

        void addOrder(Order order) {
            orders.add(order);
        }

        public void accept(Visitor visitor){
            visitor.visit(this);
            for(Order order : orders){
                order.accept(visitor);
            }
        }
    }

    public class Order implements Element {
        private String name;
        private List<Item> items = new ArrayList();

        Order(String name){
            this.name = name;
        }

        Order(String name, String itemName) {
            this.name = name;
            this.addItem(new Item(itemName));
        }

        String getName(){
            return name;
        }

        void addItem(Item item) {
            items.add(item);
        }

        public void accept(Visitor visitor) {
            visitor.visit(this);
            for(Item item : items){
                item.accept(visitor);
            }
        }
    }

    public class Item implements Element {
        private String name;
        Item(String name) {
            this.name = name;
        }
        String getName(){
            return name;
        }

        public void accept(Visitor visitor){
            visitor.visit(this);
        }
    }

    public interface Visitor {
        void visit(Customer customer);

        void visit(Order order);

        void visit(Item item);
    }

    public class GeneralReport implements Visitor {
        private int customerNo;
        private int orderNo;
        private int itemsNo;

        public void visit(Customer customer) {
            System.out.println(customer.getName());
            customerNo++;
        }

        public void visit(Order order) {
            System.out.println(order.getName());
            orderNo++;
        }

        public void visit(Item item) {
            System.out.println(item.getName());
            itemsNo++;
        }

        public void displayResults() {
            System.out.println("Number of customers: " + customerNo);
            System.out.println("Number of orders: " + orderNo);
            System.out.println("Number of items: " + itemsNo);
        }
    }

    public class Client{
        public static void main() {
            Customer customer1 = new Customer("customer1");
            customer1.addOrder(new Order("order1", "item1"));
            customer1.addOrder(new Order("order2", "item1"));
            customer1.addOrder(new Order("order3", "item1"));

            Order order = new Order("order_a");
            order.addItem(new Item("item_a1"));
            order.addItem(new Item("item_a2"));
            order.addItem(new Item("item_a3"));
            Customer customer2 = new Customer("customer2");
            customer2.addOrder(order);

            CustomerGroup customers = new CustomerGroup();
            customers.addCustomer(customer1);
            customers.addCustomer(customer2);

            GeneralReport visitor = new GeneralReport();
            customer.accept(visitor);
            visitor.displayResults();
        }
    }