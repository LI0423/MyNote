# OpenCV

## 深度神经网络模块（DNN）

### blobFromImage

用于将图像转换为深度学习模型所需的输入格式，主要是对传入的图像进行的转换包括图像尺寸调整、均值减法、缩放等预处理步骤，以便图像数据能够适配深度学习模型的输入要求。

- 图像尺寸调整：函数可以根据需要调整图像的尺寸，以匹配神经网络的输入尺寸。
- 均值减法：可以指定一个均值（mean），该函数会从图像的每个通道中减去这个均值。通常用于数据中心化，以提高模型的训练和推理性能。
- 缩放：通过scalefactor参数，可以对图像数据进行缩放，通常用于数据归一化。
- 通道交换：如果swapRB参数设置为true，则会交换图像的红色（R）和蓝色（B）通道，因为OpenCV默认使用BGR格式，而某些神经网络框架使用RGB格式。
- 裁剪：如果crop参数设置为true，则在调整图像大小时进行中心裁剪，以确保输出尺寸与指定的尺寸精确匹配。
- 数据类型：通过ddepth参数可以指定输出blob的深度，通常选择CV_32F（32位浮点数）。
- 批量处理：还有一个对应的函数blobFromImages，用于将一系列图像转换为一个批量的blob，在处理图像批次时更为高效。

函数执行顺序：

1. 先相对于原图像中心resize，crop
2. 减去均值
3. 像素值缩放0-255 -> 0-1
4. 图像数据通道转换，RGB -> BGR
5. 返回一个NCHW数组
