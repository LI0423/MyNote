(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["riskControl"],{"01fd":function(t,e,o){},"0743":function(t,e,o){},"1b71":function(t,e,o){"use strict";var i=o("01fd"),l=o.n(i);l.a},"3fea":function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("risk-control-list")},l=[],r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"risk-control-list"},[t.isListPage&&!t.enableSelector?o("div",{staticClass:"main-title"},[o("h1",[t._v("风控策略")])]):t._e(),o("do-filter-panel",{on:{search:function(e){return t.search(!0)}}},[o("el-form",{attrs:{inline:"","label-width":"100px"},nativeOn:{submit:function(t){t.preventDefault()}}},[o("el-form-item",{attrs:{label:"产品"}},[o("allApps",{attrs:{"sync-to-store":!0},on:{change:function(e){return t.search(!0)}},model:{value:t.query.appId,callback:function(e){t.$set(t.query,"appId",e)},expression:"query.appId"}},[o("template",{slot:"prepend"},[o("el-option",{attrs:{value:"",label:"不限"}})],1)],2)],1),o("el-form-item",{attrs:{label:"渠道"}},[o("el-select",{attrs:{filterable:""},on:{change:function(e){return t.search(!0)}},model:{value:t.query.source,callback:function(e){t.$set(t.query,"source",e)},expression:"query.source"}},[o("el-option-group",[o("el-option",{key:"all",attrs:{value:"",label:"不限"}}),t._l(t.$MAPS.risk.channel.labelMap,(function(t,e){return o("el-option",{key:e,attrs:{value:e,label:t}})}))],2)],1)],1),o("el-form-item",{attrs:{label:"机型"}},[o("el-input",{attrs:{clearable:"",placeholder:"请输入机型"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(!0)}},model:{value:t.query.model,callback:function(e){t.$set(t.query,"model",e)},expression:"query.model"}})],1),o("el-form-item",{attrs:{label:"Token"}},[o("el-input",{attrs:{clearable:"",placeholder:"请输入Token"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(!0)}},model:{value:t.query.token,callback:function(e){t.$set(t.query,"token",e)},expression:"query.token"}})],1),o("el-form-item",{attrs:{label:"AID"}},[o("el-input",{attrs:{clearable:"",placeholder:"不限"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(!0)}},model:{value:t.query.aid,callback:function(e){t.$set(t.query,"aid",e)},expression:"query.aid"}})],1)],1)],1),o("div",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticClass:"table-wrap do-card"},[o("div",{staticClass:"bd"},[o("el-table",{staticClass:"hide-border",attrs:{data:t.tableData,border:"",stripe:"","default-sort":{prop:t.defaultSort.prop,order:t.defaultSort.order}},on:{"sort-change":t.handleSortChange,"selection-change":t.changeSelectionRiskControl,"row-click":t.changeSelectionRiskControl}},[t.enableSelector?o("el-table-column",{attrs:{type:"selection",width:"55"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[o("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:t.value[t.valueKey]+""===i[t.valueKey]+"",expression:"(value[valueKey] + '') === (row[valueKey] + '')"}],staticClass:"show-normal-checkbox",attrs:{checked:"",disabled:""}}),o("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:!(t.value[t.valueKey]+""===i[t.valueKey]+""),expression:"!((value[valueKey] + '') === (row[valueKey] + ''))"}],staticClass:"show-normal-checkbox",attrs:{disabled:""}})]}}],null,!1,4152027107)}):t._e(),o("el-table-column",{attrs:{label:"策略维度","min-width":"100","show-overflow-tooltip":"",fixed:"left",prop:"configType"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row,i=e.column;return[t._v(" "+t._s(t._f("riskConfigType")(o[i.property]))+" ")]}}])}),o("el-table-column",{attrs:{label:"所属产品","min-width":"110","show-overflow-tooltip":"",fixed:"left",prop:"app"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[t._v(" "+t._s(t._f("pkgToName")(o.app))+" ")]}}])}),o("el-table-column",{attrs:{label:"配置内容","min-width":"200","class-name":"name-slot-cell",fixed:"left"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[o("div",{staticClass:"config-list"},[o("div",{staticClass:"name fs-12"},[o("span",{staticClass:"label"},[t._v("渠道:")]),t._v(t._s(t._f("labelRiskChannel")(i.source)))]),i.aid?o("div",{staticClass:"name fs-12"},[o("span",{staticClass:"label"},[t._v("AID:")]),t._v(t._s(i.aid))]):t._e(),i.model?o("div",{staticClass:"name fs-12"},[o("span",{staticClass:"label"},[t._v("机型:")]),t._v(t._s(i.model))]):t._e(),i.token?o("div",{staticClass:"name fs-12"},[o("span",{staticClass:"label"},[t._v("Token:")]),t._v(t._s(i.token))]):t._e()])]}}])}),o("el-table-column",{attrs:{label:"单日广告展示上限","min-width":"100",align:"right",prop:"maxValue"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[o("div",{staticClass:"balance-td"},[i.maxValue||0===i.maxValue?o("span",{staticClass:"money mono"},[t._v(t._s(i.maxValue))]):o("span",[t._v("-")])])]}}])},[o("template",{slot:"header"},[o("span",{staticClass:"cell-header"},[o("span",[t._v("单日广告")]),o("span",[t._v("展示上限")])])])],2),o("el-table-column",{attrs:{label:"h5占比最大值","min-width":"100",align:"right",prop:"ratio"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[o("div",{staticClass:"balance-td"},[i.ratio||0===i.ratio?o("span",{staticClass:"money mono"},[t._v(t._s(t._f("percent")(i.ratio,-1,!0)))]):o("span",[t._v("-")])])]}}])},[o("template",{slot:"header"},[o("span",{staticClass:"cell-header"},[o("span",[t._v("h5占比")]),o("span",[t._v("最大值")])])])],2),o("el-table-column",{attrs:{label:"h5占比计算起点","min-width":"100",align:"right",prop:"minValue"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[o("div",{staticClass:"balance-td"},[i.minValue||0===i.minValue?o("span",{staticClass:"money mono"},[t._v(t._s(i.minValue))]):o("span",[t._v("-")])])]}}])},[o("template",{slot:"header"},[o("span",{staticClass:"cell-header"},[o("span",[t._v("h5占比")]),o("span",[t._v("计算起点")])])])],2),o("el-table-column",{attrs:{label:"点击率计算起点","min-width":"100",align:"right",prop:"minClick"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[o("div",{staticClass:"balance-td"},[i.minClick||0===i.minClick?o("span",{staticClass:"money mono"},[t._v(t._s(i.minClick))]):o("span",[t._v("-")])])]}}])},[o("template",{slot:"header"},[o("span",{staticClass:"cell-header"},[o("span",[t._v("点击率")]),o("span",[t._v("计算起点")])])])],2),o("el-table-column",{attrs:{label:"单日广告点击率警告起点","min-width":"120",align:"right",prop:"warnCtr"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[o("div",{staticClass:"balance-td"},[i.warnCtr||0===i.warnCtr?o("span",{staticClass:"money mono"},[t._v(t._s(t._f("percent")(i.warnCtr,-1,!0)))]):o("span",[t._v("-")])])]}}])},[o("template",{slot:"header"},[o("span",{staticClass:"cell-header"},[o("span",[t._v("单日广告")]),o("span",[t._v("点击率警告起点")])])])],2),o("el-table-column",{attrs:{label:"单日广告点击率封禁起点","min-width":"120",align:"right",prop:"maxCtr"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[o("div",{staticClass:"balance-td"},[i.maxCtr||0===i.maxCtr?o("span",{staticClass:"money mono"},[t._v(t._s(t._f("percent")(i.maxCtr,-1,!0)))]):o("span",[t._v("-")])])]}}])},[o("template",{slot:"header"},[o("span",{staticClass:"cell-header"},[o("span",[t._v("单日广告")]),o("span",[t._v("点击率封禁起点")])])])],2),o("el-table-column",{attrs:{label:"填充次数","min-width":"100",align:"right",prop:"fillValue"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[o("div",{staticClass:"balance-td"},[i.fillValue||0===i.fillValue?o("span",{staticClass:"money mono"},[t._v(t._s(i.fillValue))]):o("span",[t._v("-")])])]}}])}),t.enableSelector?t._e():o("el-table-column",{attrs:{"class-name":"ctrl-td",width:"180px",align:"right",fixed:"right",label:"操作"},scopedSlots:t._u([{key:"header",fn:function(){return[o("dialog-edit-risk-control",{attrs:{"append-to-body":!0},on:{ok:function(e){return t.search(!0)}}},[o("div",{staticClass:"btn-add-risk-control"},[t.writeable?o("el-button",{attrs:{size:"medium",icon:"el-icon-plus",type:"success",plain:""}},[t._v("新增策略")]):t._e()],1)])]},proxy:!0},{key:"default",fn:function(e){var i=e.row;return[t.writeable?o("dialog-edit-risk-control",{attrs:{"risk-control-line":i,"append-to-body":!0},on:{ok:function(e){return t.search(!1)}}},[o("el-button",{staticClass:"edit-risk-control-btn",attrs:{plain:"",type:"primary",size:"mini"}},[o("i",{staticClass:"el-icon-edit"})])],1):t._e(),t.writeable?o("el-popconfirm",{staticClass:"delete-risk-control-wrapper",attrs:{title:"确定要删除该风控策略？"},on:{onConfirm:function(e){return t.deleteRiskControl(i)}}},[o("el-button",{staticClass:"delete-risk-control-btn",attrs:{slot:"reference",plain:"",type:"danger",size:"mini"},slot:"reference"},[i.__deleting?o("i",{staticClass:"el-icon-loading"}):o("i",{staticClass:"el-icon-delete"})])],1):t._e()]}}],null,!1,2042385799)})],1)],1)]),o("base-pagination",{attrs:{"current-page":t.query.pageNum,"page-size":t.query.pageSize,total:t.total},on:{"current-change":t.handlePnChange,"size-change":t.handleSizeChange}})],1)},a=[],n=(o("d3b7"),o("ac1f"),o("841c"),o("96cf"),o("1da1")),s=o("5628"),d=o("d143"),c=o("6518"),u=o("6bc9"),p=function(t){var e=t.appId,o=t.model,i=t.token,l=t.source,r=t.aid,a=t.sequence,n=t.orderBy,d=t.pageNum,c=t.pageSize;return window.axios.get("/risk/control/list",{params:{app:s["a"].apps.appIdToPkg[e],model:o,token:i,source:l,aid:r,sequence:a,orderBy:n,pageNum:d,pageSize:c}})},f=function(t){var e=t.appId,o=t.configType,i=t.aid,l=t.source,r=t.model,a=t.tokens,n=t.maxValue,p=t.ratio,f=t.minValue,m=t.minClick,k=t.warnCtr,C=t.maxCtr,v=t.fillValue,h=a?u["c"]:r?u["b"]:u["a"];return window.axios.post("/risk/control/add",{app:s["a"].apps.appIdToPkg[e],configType:o,aid:i,source:l,model:r,type:h,tokens:Object(d["a"])(a),maxValue:n,ratio:p?c["a"].fDiv(p,100):p,minValue:f,minClick:m,warnCtr:k?c["a"].fDiv(k,100):k,maxCtr:C?c["a"].fDiv(C,100):C,fillValue:v})},m=function(t){var e=t.id,o=t.appId,i=t.configType,l=t.aid,r=t.source,a=t.model,n=t.tokens,d=t.maxValue,p=t.ratio,f=t.minValue,m=t.minClick,k=t.warnCtr,C=t.maxCtr,v=t.fillValue,h=n?u["c"]:a?u["b"]:u["a"];return window.axios.put("/risk/control/update",{id:e,app:s["a"].apps.appIdToPkg[o],configType:i,aid:l,source:r,model:a,tokens:[n],type:h,maxValue:d,ratio:p?c["a"].fDiv(p,100):p,minValue:f,minClick:m,warnCtr:k?c["a"].fDiv(k,100):k,maxCtr:C?c["a"].fDiv(C,100):C,fillValue:v})},k=function(t){var e=t.id;return window.axios.delete("/risk/control/delete/".concat(e))},C=o("619b"),v=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"dialog-edit-risk-control"},[o("el-tooltip",{attrs:{disabled:!0,content:"",placement:"top"}},[o("div",{staticClass:"edit-risk-control-tooltip",attrs:{slot:"content"},slot:"content"}),o("div",{staticClass:"click-edit-risk-control",on:{click:t.showDialogEditRiskControl}},[t._t("default")],2)]),o("el-dialog",{ref:"refDialogEditRiskControl",staticClass:"dialog-edit-risk-control-box",attrs:{visible:t.dialogEditRiskControl,"append-to-body":t.appendToBody},on:{closed:t.resetEditRiskControl,"update:visible":function(e){t.dialogEditRiskControl=e}}},[o("template",{slot:"title"},[o("span",{staticClass:"el-dialog__title"},[t._v(" "+t._s(t.isEdit?t.isPreview?"查看风控策略":"编辑风控策略":"新增风控策略")+" "),t.isEdit?o("span",{staticClass:"tips"},[t._v("(ID: "+t._s(t.formEditRiskControl.id)+")")]):t._e()])]),o("section",{directives:[{name:"loading",rawName:"v-loading",value:t.requesting,expression:"requesting"}],staticClass:"edit-risk-control-box"},[o("el-form",{ref:"refFormEditRiskControl",attrs:{model:t.formEditRiskControl,"label-width":t.formEditRiskControl.labelWidth,rules:t.formEditRiskControl.rules},nativeOn:{submit:function(t){t.preventDefault()}}},[o("el-row",{attrs:{gutter:24}},[o("el-col",{attrs:{span:10}},[o("el-divider",{attrs:{"content-position":"left"}},[t._v("基础配置")]),o("el-form-item",{attrs:{prop:"appId",label:"应用名","label-width":"100px"}},[o("allApps",{attrs:{disabled:t.isEdit},model:{value:t.formEditRiskControl.appId,callback:function(e){t.$set(t.formEditRiskControl,"appId",e)},expression:"formEditRiskControl.appId"}})],1),o("el-form-item",{attrs:{label:"策略维度",prop:"configType","label-width":"100px"}},[o("el-radio-group",{attrs:{size:"small",disabled:t.isEdit},on:{change:t.handleConfigTypeChanged},model:{value:t.formEditRiskControl.configType,callback:function(e){t.$set(t.formEditRiskControl,"configType",e)},expression:"formEditRiskControl.configType"}},t._l(t.$MAPS.risk.configType,(function(e,i){return o("el-radio-button",{key:i,attrs:{label:+i}},[t._v(t._s(e))])})),1)],1),o("el-form-item",{attrs:{label:"渠道",prop:"source","label-width":"100px"}},[o("el-select",{attrs:{placeholder:"请选择渠道",value:""},model:{value:t.formEditRiskControl.source,callback:function(e){t.$set(t.formEditRiskControl,"source",e)},expression:"formEditRiskControl.source"}},[o("el-option-group",t._l(t.$MAPS.risk.channel.labelMap,(function(t,e){return o("el-option",{key:e,attrs:{value:e,label:t}})})),1)],1)],1),[2].includes(t.formEditRiskControl.configType)?o("el-form-item",{attrs:{label:"AID",prop:"aid","label-width":"100px"}},[o("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"请输入AID"},scopedSlots:t._u([{key:"append",fn:function(){return[t.formEditRiskControl.appId?o("el-button",{on:{click:t.showAidDialog}},[t._v("选择AID")]):t._e()]},proxy:!0}],null,!1,2685172909),model:{value:t.formEditRiskControl.aid,callback:function(e){t.$set(t.formEditRiskControl,"aid","string"===typeof e?e.trim():e)},expression:"formEditRiskControl.aid"}}),o("aidSelectorDialog",{ref:"aidSelectorDialog",attrs:{pkg:t._f("appIdToPkg")(t.formEditRiskControl.appId)},model:{value:t.formEditRiskControl.aid,callback:function(e){t.$set(t.formEditRiskControl,"aid","string"===typeof e?e.trim():e)},expression:"formEditRiskControl.aid"}})],1):t._e(),o("el-divider",{attrs:{"content-position":"left"}},[t._v("指定范围配置"),o("span",{staticClass:"color-gray ml-gap-s"},[t._v("机型和Token只能配置其一")])]),o("el-form-item",{attrs:{label:"机型",prop:"model","label-width":"100px"}},[o("el-input",{attrs:{type:"text",autocomplete:"off",clearable:"",disabled:!!t.formEditRiskControl.tokens,placeholder:"请输入机型"},model:{value:t.formEditRiskControl.model,callback:function(e){t.$set(t.formEditRiskControl,"model","string"===typeof e?e.trim():e)},expression:"formEditRiskControl.model"}})],1),o("el-form-item",{attrs:{label:"Token",prop:"tokens","label-width":"100px"}},[t.isEdit?o("el-input",{attrs:{disabled:!!t.formEditRiskControl.model,placeholder:"请输入Token"},model:{value:t.formEditRiskControl.tokens,callback:function(e){t.$set(t.formEditRiskControl,"tokens",e)},expression:"formEditRiskControl.tokens"}}):o("el-input",{attrs:{type:"textarea",disabled:!!t.formEditRiskControl.model,autosize:{minRows:5,maxRows:10},placeholder:"请每行输入一个Token. 如：\ntoken-1\ntoken-2\n...\ntoken-n"},model:{value:t.formEditRiskControl.tokens,callback:function(e){t.$set(t.formEditRiskControl,"tokens",e)},expression:"formEditRiskControl.tokens"}})],1)],1),o("el-col",{attrs:{span:14}},[o("el-form-item",{attrs:{label:"单日广告展示上限",prop:"maxValue"}},[o("el-input",{attrs:{type:"text",autocomplete:"off",disabled:t.isPreview,placeholder:"请输入单日广告展示上限"},model:{value:t.formEditRiskControl.maxValue,callback:function(e){t.$set(t.formEditRiskControl,"maxValue","string"===typeof e?e.trim():e)},expression:"formEditRiskControl.maxValue"}})],1),o("el-form-item",{attrs:{label:"h5占比最大值",prop:"ratio"}},[o("el-input",{attrs:{type:"text",autocomplete:"off",disabled:t.aidConfigFieldsDisabled,placeholder:"请输入h5占比最大值"},model:{value:t.formEditRiskControl.ratio,callback:function(e){t.$set(t.formEditRiskControl,"ratio","string"===typeof e?e.trim():e)},expression:"formEditRiskControl.ratio"}},[o("template",{slot:"append"},[t._v("%")])],2)],1),o("el-form-item",{attrs:{label:"h5占比计算起点",prop:"minValue"}},[o("el-input",{attrs:{type:"text",autocomplete:"off",disabled:t.aidConfigFieldsDisabled,placeholder:"请输入h5占比计算起点"},model:{value:t.formEditRiskControl.minValue,callback:function(e){t.$set(t.formEditRiskControl,"minValue","string"===typeof e?e.trim():e)},expression:"formEditRiskControl.minValue"}})],1),o("el-form-item",{attrs:{label:"点击率计算起点",prop:"minClick"}},[o("el-input",{attrs:{type:"text",autocomplete:"off",disabled:t.aidConfigFieldsDisabled,placeholder:"请输入点击率计算起点"},model:{value:t.formEditRiskControl.minClick,callback:function(e){t.$set(t.formEditRiskControl,"minClick","string"===typeof e?e.trim():e)},expression:"formEditRiskControl.minClick"}})],1),o("el-form-item",{attrs:{label:"单日广告点击率警告起点",prop:"warnCtr"}},[o("el-input",{attrs:{type:"text",autocomplete:"off",disabled:t.aidConfigFieldsDisabled,placeholder:"请输入单日广告点击率警告起点"},model:{value:t.formEditRiskControl.warnCtr,callback:function(e){t.$set(t.formEditRiskControl,"warnCtr","string"===typeof e?e.trim():e)},expression:"formEditRiskControl.warnCtr"}},[o("template",{slot:"append"},[t._v("%")])],2)],1),o("el-form-item",{attrs:{label:"单日广告点击率封禁起点",prop:"maxCtr"}},[o("el-input",{attrs:{type:"text",autocomplete:"off",disabled:t.aidConfigFieldsDisabled,placeholder:"请输入单日广告点击率封禁起点"},model:{value:t.formEditRiskControl.maxCtr,callback:function(e){t.$set(t.formEditRiskControl,"maxCtr","string"===typeof e?e.trim():e)},expression:"formEditRiskControl.maxCtr"}},[o("template",{slot:"append"},[t._v("%")])],2)],1),o("el-form-item",{attrs:{label:"填充次数",prop:"fillValue"}},[o("el-input",{attrs:{type:"text",autocomplete:"off",disabled:t.aidConfigFieldsDisabled,placeholder:"请输入填充次数"},model:{value:t.formEditRiskControl.fillValue,callback:function(e){t.$set(t.formEditRiskControl,"fillValue","string"===typeof e?e.trim():e)},expression:"formEditRiskControl.fillValue"}})],1)],1)],1)],1)],1),o("div",{staticClass:"edit-risk-control-footer"},[t.isPreview?o("div",{staticClass:"edit-risk-control-btn"},[o("el-button",{attrs:{size:"small"},on:{click:t.cancelEditRiskControl}},[t._v("关 闭")])],1):o("div",{staticClass:"edit-risk-control-btn"},[o("el-button",{attrs:{size:"small"},on:{click:t.cancelEditRiskControl}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary",loading:t.confirming,size:"small"},on:{click:t.confirmEditRiskControl}},[t._v("完 成")])],1)])],2)],1)},h=[],b=o("ffaa"),g={name:"DialogEditRiskControl",components:{aidSelectorDialog:b["a"]},props:{riskControlLine:{type:Object,default:function(){return null}},isPreview:{type:Boolean,default:function(){return!1}},appendToBody:{type:Boolean,default:function(){return!1}}},data:function(){return{dialogEditRiskControl:!1,requesting:!1,formEditRiskControl:{labelWidth:"190px",id:"",appId:"",configType:"",source:"",aid:"",model:"",tokens:"",maxValue:"",ratio:"",minValue:"",minClick:"",warnCtr:"",maxCtr:"",fillValue:"",rules:{appId:[{required:!0,message:"请选择应用"}],configType:[{required:!0,message:"请选择策略维度"}],source:[{required:!0,message:"请选择渠道"}],aid:[{required:!0,message:"请填写AID"}],maxValue:[{validator:this.$utils.validator.nullOrNumber}],ratio:[{validator:this.$utils.validator.nullOrNumber}],minValue:[{validator:this.$utils.validator.nullOrNumber}],minClick:[{validator:this.$utils.validator.nullOrNumber}],warnCtr:[{validator:this.$utils.validator.nullOrNumber}],maxCtr:[{validator:this.$utils.validator.nullOrNumber}],fillValue:[{validator:this.$utils.validator.nullOrNumber}]}},confirming:!1}},computed:{isEdit:function(){return!!this.formEditRiskControl.id},aidConfigFieldsDisabled:function(){return 0===this.formEditRiskControl.configType}},methods:{reRender:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.riskControlLine){e.next=3;break}return t.requesting=!1,e.abrupt("return");case 3:t.formEditRiskControl.id=t.riskControlLine.id,t.formEditRiskControl.appId=t.$MAPS.apps.pkgToAppId[t.riskControlLine.app],t.formEditRiskControl.configType=t.riskControlLine.configType||0===t.riskControlLine.configType?+t.riskControlLine.configType:"",t.formEditRiskControl.source=t.riskControlLine.source,t.formEditRiskControl.aid=t.riskControlLine.aid,t.formEditRiskControl.model=t.riskControlLine.model,t.formEditRiskControl.tokens=t.riskControlLine.token,t.formEditRiskControl.maxValue=t.riskControlLine.maxValue,t.formEditRiskControl.ratio=t.riskControlLine.ratio?t.$utils.fMul(t.riskControlLine.ratio,100):t.riskControlLine.ratio,t.formEditRiskControl.minValue=t.riskControlLine.minValue,t.formEditRiskControl.minClick=t.riskControlLine.minClick,t.formEditRiskControl.warnCtr=t.riskControlLine.warnCtr?t.$utils.fMul(t.riskControlLine.warnCtr,100):t.riskControlLine.warnCtr,t.formEditRiskControl.maxCtr=t.riskControlLine.maxCtr?t.$utils.fMul(t.riskControlLine.maxCtr,100):t.riskControlLine.maxCtr,t.formEditRiskControl.fillValue=t.riskControlLine.fillValue;case 17:case"end":return e.stop()}}),e)})))()},showDialogEditRiskControl:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$emit("open"),t.dialogEditRiskControl=!0,t.requesting=!0,e.prev=3,e.next=6,t.reRender();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](3),console.log(e.t0);case 11:return e.prev=11,t.requesting=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[3,8,11,14]])})))()},cancelEditRiskControl:function(){this.dialogEditRiskControl=!1},resetEditRiskControl:function(){this.formEditRiskControl.id="",this.formEditRiskControl.appId="",this.formEditRiskControl.configType="",this.formEditRiskControl.source="",this.formEditRiskControl.aid="",this.formEditRiskControl.model="",this.formEditRiskControl.tokens="",this.formEditRiskControl.maxValue="",this.formEditRiskControl.ratio="",this.formEditRiskControl.minValue="",this.formEditRiskControl.minClick="",this.formEditRiskControl.warnCtr="",this.formEditRiskControl.maxCtr="",this.formEditRiskControl.fillValue="",this.$refs.refFormEditRiskControl&&this.$refs.refFormEditRiskControl.resetFields(),this.$emit("close")},confirmEditRiskControl:function(){var t=this;this.$refs.refFormEditRiskControl&&this.$refs.refFormEditRiskControl.validate((function(e){if(e){if(t.confirming)return;var o;t.confirming=!0,o=t.isEdit?m(t.formEditRiskControl):f(t.formEditRiskControl),o.then((function(){t.$emit("ok"),t.$message({message:"".concat(t.isEdit?"编辑":"新增","风控策略成功"),type:"success"}),t.dialogEditRiskControl=!1})).catch((function(){})).finally((function(){t.confirming=!1}))}}))},handleConfigTypeChanged:function(t){this.formEditRiskControl.aid="",this.formEditRiskControl.maxValue="",this.formEditRiskControl.ratio="",this.formEditRiskControl.minValue="",this.formEditRiskControl.minClick="",this.formEditRiskControl.warnCtr="",this.formEditRiskControl.maxCtr="",this.formEditRiskControl.fillValue=""},showAidDialog:function(){this.$refs.aidSelectorDialog.showPopper()}}},y=g,R=(o("e28e"),o("1b71"),o("2877")),E=Object(R["a"])(y,v,h,!1,null,"2bd95b5b",null),_=E.exports,w={name:"RiskControlList",components:{DialogEditRiskControl:_},mixins:[C["a"]],props:{isListPage:{type:Boolean,default:function(){return!0}},value:{type:Object,default:function(){return{}}},labelKey:{type:String,default:"sid"},valueKey:{type:String,default:"id"},enableSelector:{type:Boolean,default:function(){return!1}}},data:function(){var t={prop:"",order:""};return{showOverflowTooltip:!0,defaultSort:t,query:{appId:"",model:"",token:"",source:"",orderBy:t.prop,sequence:t.order},selectedRiskControl:[]}},computed:{writeable:function(){return this.$HAS_PERMISSION("mango:risk-control:w")}},created:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.tableLoading=!0,t.search(!0);case 2:case"end":return e.stop()}}),e)})))()},methods:{search:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this.query.pageNum=1),this.tableLoading=!0,p(this.query).then((function(e){e&&(t.total=e.total,t.tableData=e.lists)})).finally((function(){t.tableLoading=!1}))},hideOverflowTooltip:function(){this.showOverflowTooltip=!1},enableOverflowTooltip:function(){this.showOverflowTooltip=!0},deleteRiskControl:function(t){var e=this;this.$set(t,"__deleting",!0),k(t).then((function(){e.$message({message:"风控策略删除成功",type:"success"}),e.search()})).finally((function(){e.$set(t,"__deleting",!1)}))},changeSelectionRiskControl:function(t){if(this.enableSelector){var e=this.$utils.deepClone("array"===this.$utils.getRealType(t)?t[0]:t||{});this.$emit("input",e),this.$emit("on-change",e)}else this.selectedRiskControl=t}}},x=w,V=(o("eb31"),Object(R["a"])(x,r,a,!1,null,"20397ea4",null)),$=V.exports,T={name:"FakeBlindProductManage",components:{RiskControlList:$}},S=T,D=Object(R["a"])(S,i,l,!1,null,null,null);e["default"]=D.exports},"40d9":function(t,e,o){},e28e:function(t,e,o){"use strict";var i=o("0743"),l=o.n(i);l.a},eb31:function(t,e,o){"use strict";var i=o("40d9"),l=o.n(i);l.a}}]);