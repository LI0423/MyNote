(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["coin"],{"73d1":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"-page"},[a("h1",{staticClass:"main-title"},[e._v("金币流水")]),a("div",{staticClass:"search-wrap do-card"},[a("div",{staticClass:"bd"},[a("el-form",{attrs:{inline:"","label-width":"100px"}},[a("el-form-item",{attrs:{label:"产品"}},[a("allApps",{attrs:{"sync-to-store":!0},on:{change:function(t){return e.search(!0)}},model:{value:e.query.appId,callback:function(t){e.$set(e.query,"appId",t)},expression:"query.appId"}})],1),a("el-form-item",{attrs:{label:"登录ID"}},[a("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(!0)}},model:{value:e.query.userId,callback:function(t){e.$set(e.query,"userId",t)},expression:"query.userId"}})],1),a("el-form-item",{attrs:{label:"日期"}},[a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.handleDateChange},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1),a("div",{staticClass:"ctrl tr"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.search(!0)}}},[e._v("搜索")])],1)],1)]),a("div",{staticClass:"tr",staticStyle:{margin:"-12px 0 12px"}},[a("el-button",{attrs:{size:"small",icon:"el-icon-download"},on:{click:e.handleDownload}},[e._v("下载报表")])],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"table-wrap do-card"},[a("div",{staticClass:"bd"},[a("el-table",{staticClass:"hide-border",attrs:{data:e.tableData,border:"","default-sort":{prop:e.defaultSort.prop,order:e.defaultSort.order}},on:{"sort-change":e.handleSortChange}},[a("el-table-column",{attrs:{label:"ID",width:"180","show-overflow-tooltip":!0,sortable:"custom","sort-orders":e.defaultSortOrders,prop:"id"}}),a("el-table-column",{attrs:{label:"日期","min-width":"120",sortable:"custom","sort-orders":e.defaultSortOrders,prop:"createTime"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("date")(a.createTime,"dateTime"))+" ")]}}])}),a("el-table-column",{attrs:{label:"登录ID","min-width":"180",sortable:"custom","sort-orders":e.defaultSortOrders,prop:"userId"}}),a("el-table-column",{attrs:{label:"任务名称","min-width":"150",sortable:"custom","sort-orders":e.defaultSortOrders,prop:"taskName"}}),a("el-table-column",{attrs:{label:"奖励值",align:"right","min-width":"80",sortable:"custom","sort-orders":e.defaultSortOrders,prop:"number"}})],1)],1)]),a("base-pagination",{attrs:{"current-page":e.query.pageNum,"page-size":e.query.pageSize,total:e.total},on:{"current-change":e.handlePnChange,"size-change":e.handleSizeChange}})],1)},s=[],n=(a("d3b7"),a("ac1f"),a("841c"),a("619b")),o={getList:function(e){return window.axios.get("/goldCoin",{params:e})},download:function(e){return window.axios.get("/goldCoin/downloadExcel",{params:e})}},l=a("4328"),i=a.n(l),d={name:"",components:{},mixins:[n["a"]],data:function(){var e=this.$utils.transferDate(Date.now()-0*MS_PER_DAY),t=this.$utils.transferDate(Date.now()-0*MS_PER_DAY);return{date:[e,t],query:{appId:this.$store.state.apps.activeAppId,userId:"",startDate:"",endDate:""},queryCache:{}}},props:{},computed:{},methods:{search:function(e){var t=this;this.tableLoading||(this.query.appId?(e&&(this.query.pageNum=1),this.queryCache=Object.assign({},this.query),this.tableLoading=!0,o.getList(this.query).then((function(e){t.total=e.total,t.tableData=e.lists})).finally((function(){t.tableLoading=!1}))):this.$message({type:"warning",message:"请先选择产品"}))},handleDateChange:function(e){this.search(!0)},handleDownload:function(){var e="/api/v1/goldCoin/downloadExcel",t=i.a.stringify(this.queryCache),a=t?"?":"";window.open(e+a+t)}},watch:{date:{handler:function(e){var t="",a="";e&&2===e.length&&(t=e[0],a=e[1]),this.query.startDate=t,this.query.endDate=a},immediate:!0}},created:function(){this.queryCache=Object.assign({},this.query),this.search(!0)},mounted:function(){},errorCaptured:function(e,t,a){console.log(e,t,a)},destroyed:function(){}},c=d,u=a("2877"),p=Object(u["a"])(c,r,s,!1,null,"277c5705",null);t["default"]=p.exports}}]);