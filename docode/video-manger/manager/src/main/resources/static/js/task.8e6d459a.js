(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["task"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"1b7f":function(t,e,a){"use strict";var o=a("c32f"),s=a.n(o);s.a},"1d21":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-page"},[a("h1",{staticClass:"main-title"},[t._v("任务管理 "),t.writeAble?a("div",{staticClass:"right"},[a("dialog-copy-task",{attrs:{"default-app-id":t.query.appId}},[a("el-button",{attrs:{size:"medium",icon:"el-icon-connection",type:"success",plain:""}},[t._v("一键复制")])],1),a("el-button",{attrs:{size:"medium",icon:"el-icon-plus",type:"success",plain:""},on:{click:t.handleAdd}},[t._v("添加任务")])],1):t._e()]),a("div",{staticClass:"search-wrap do-card"},[a("div",{staticClass:"bd"},[a("el-form",{attrs:{inline:"","label-width":"100px"}},[a("el-form-item",{attrs:{label:"产品"}},[a("allApps",{attrs:{"sync-to-store":!0},on:{change:function(e){return t.search(!0)}},model:{value:t.query.appId,callback:function(e){t.$set(t.query,"appId",e)},expression:"query.appId"}})],1),a("el-form-item",{attrs:{label:t.$MAPS.task.labels.name}},[a("el-input",{nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(!0)}},model:{value:t.query.name,callback:function(e){t.$set(t.query,"name",e)},expression:"query.name"}})],1),a("el-form-item",{attrs:{label:t.$MAPS.task.labels.taskGroup}},[a("el-select",{on:{change:function(e){return t.search(!0)}},model:{value:t.query.taskGroup,callback:function(e){t.$set(t.query,"taskGroup",e)},expression:"query.taskGroup"}},[a("el-option",{attrs:{value:"",label:"不限"}}),t._l(t.$MAPS.task.group,(function(t,e){return a("el-option",{key:e,attrs:{value:e,label:t}})}))],2)],1)],1),a("div",{staticClass:"ctrl tr"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.search(!0)}}},[t._v("搜索")])],1)],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticClass:"table-wrap do-card"},[a("div",{staticClass:"bd"},[a("el-table",{staticClass:"hide-border",attrs:{data:t.tableData,border:"","default-sort":{prop:t.defaultSort.prop,order:t.defaultSort.order}},on:{"sort-change":t.handleSortChange}},[a("el-table-column",{attrs:{label:"ID",width:"180",align:"","show-overflow-tooltip":!0,sortable:"custom","sort-orders":t.defaultSortOrders,prop:"id"}}),a("el-table-column",{attrs:{label:t.$MAPS.task.labels.name,"min-width":"130","show-overflow-tooltip":!0,prop:"name"}}),a("el-table-column",{attrs:{label:t.$MAPS.task.labels.taskGroup,"min-width":"80",align:"center","show-overflow-tooltip":!0,prop:"taskGroup"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t._f("taskGroup")(a.taskGroup))+" ")]}}])}),a("el-table-column",{attrs:{label:t.$MAPS.task.labels.code,"min-width":"80",align:"center","show-overflow-tooltip":!0,prop:"code"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t._f("taskCode")(a.code))+" ")]}}])}),a("el-table-column",{attrs:{label:t.$MAPS.task.labels.sort,width:"80",align:"center","show-overflow-tooltip":!0,sortable:"custom","sort-orders":t.defaultSortOrders,prop:"sort"}}),a("el-table-column",{attrs:{label:t.$MAPS.task.labels.taskType,"min-width":"80",align:"center","show-overflow-tooltip":!0,prop:"taskType"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t._f("taskType")(a.taskType))+" ")]}}])}),a("el-table-column",{attrs:{label:t.$MAPS.task.labels.createTime,"min-width":"120","show-overflow-tooltip":!0,sortable:"custom","sort-orders":t.defaultSortOrders,prop:"createTime"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t._f("date")(a.createTime,"dateTime"))+" ")]}}])}),a("el-table-column",{attrs:{label:t.$MAPS.task.labels.lastModifyTime,"min-width":"120","show-overflow-tooltip":!0,sortable:"custom","sort-orders":t.defaultSortOrders,prop:"lastModifyTime"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t._f("date")(a.lastModifyTime,"dateTime"))+" ")]}}])}),a("el-table-column",{attrs:{label:t.$MAPS.task.labels.lastModifyBy,"min-width":"80",align:"center","show-overflow-tooltip":!0,prop:"lastModifyBy"}}),t.writeAble?a("el-table-column",{attrs:{"class-name":"ctrl-td",width:"165px",align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[a("el-tooltip",{attrs:{content:"编辑任务"}},[a("el-button",{attrs:{type:"primary",plain:"",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.handleEdit(o)}}})],1),a("el-tooltip",{attrs:{content:"任务配置"}},[a("el-button",{attrs:{type:"",plain:"",size:"mini",icon:"el-icon-setting"},on:{click:function(e){return t.handleConfig(o)}}})],1),a("el-tooltip",{attrs:{content:"删除任务"}},[a("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{onConfirm:function(e){return t.handleDel(o)}}},[a("el-button",{attrs:{slot:"reference",type:"danger",plain:"",size:"mini",icon:"el-icon-delete",loading:o._deleting},slot:"reference"})],1)],1)]}}],null,!1,4245509523)}):t._e()],1)],1)]),a("base-pagination",{attrs:{"current-page":t.query.pageNum,"page-size":t.query.pageSize,total:t.total},on:{"current-change":t.handlePnChange,"size-change":t.handleSizeChange}}),a("edit-popup",{ref:"editPopup",attrs:{"default-app-id":t.query.appId,visible:t.showEditPopup},on:{ok:t.search,"update:visible":function(e){t.showEditPopup=e}}}),a("config-popup",{ref:"configPopup",attrs:{visible:t.showConfigPopup},on:{"update:visible":function(e){t.showConfigPopup=e}}})],1)},s=[],i=(a("b0c0"),a("d3b7"),a("ac1f"),a("841c"),a("619b")),l=a("b199"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:("create"===t.mode?"添加":"修改")+"任务",visible:t.dialogVisible,width:"550px"},on:{"update:visible":function(e){t.dialogVisible=e},closed:t.resetPanel}},[a("el-form",{ref:"form",attrs:{"label-width":"150px",size:"medium",model:t.form,rules:t.formRules}},[a("el-form-item",{attrs:{prop:"appId",label:t.$MAPS.task.labels.appId}},[a("allApps",{attrs:{disabled:"edit"===t.mode},model:{value:t.form.appId,callback:function(e){t.$set(t.form,"appId",e)},expression:"form.appId"}})],1),a("el-form-item",{attrs:{prop:"name",label:t.$MAPS.task.labels.name}},[a("el-input",{attrs:{placeholder:"请输入任务名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{prop:"sort",label:t.$MAPS.task.labels.sort}},[a("el-input",{attrs:{placeholder:"请输入"+t.$MAPS.task.labels.sort},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",t._n(e))},expression:"form.sort"}})],1),a("el-form-item",{attrs:{prop:"remark",label:t.$MAPS.task.labels.remark}},[a("el-input",{attrs:{placeholder:"请输入"+t.$MAPS.task.labels.remark},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),a("el-form-item",{attrs:{prop:"taskGroup",label:t.$MAPS.task.labels.taskGroup}},[a("el-select",{attrs:{placeholder:"请选择"+t.$MAPS.task.labels.taskGroup},model:{value:t.form.taskGroup,callback:function(e){t.$set(t.form,"taskGroup",e)},expression:"form.taskGroup"}},t._l(t.$MAPS.task.group,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:Number(e)}})})),1)],1),a("el-form-item",{attrs:{prop:"code",label:t.$MAPS.task.labels.code}},[a("el-select",{attrs:{placeholder:"请选择"+t.$MAPS.task.labels.code},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}},t._l(t.taskCodeOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})})),1)],1),a("el-form-item",{attrs:{prop:"taskType",label:t.$MAPS.task.labels.taskType}},[a("el-select",{attrs:{placeholder:"请选择"+t.$MAPS.task.labels.taskType},model:{value:t.form.taskType,callback:function(e){t.$set(t.form,"taskType",e)},expression:"form.taskType"}},t._l(t.$MAPS.task.type,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:Number(e)}})})),1)],1),[1,3,4,5].includes(t.form.taskType)?a("div",[a("el-form-item",{attrs:{prop:"minGoldCoin",label:t.$MAPS.task.labels.minGoldCoin,rules:t.coinRequire("minGoldCoin")}},[a("el-input",{attrs:{placeholder:"请输入"+t.$MAPS.task.labels.minGoldCoin},model:{value:t.form.minGoldCoin,callback:function(e){t.$set(t.form,"minGoldCoin",t._n(e))},expression:"form.minGoldCoin"}})],1),a("el-form-item",{attrs:{prop:"maxGoldCoin",label:t.$MAPS.task.labels.maxGoldCoin,rules:t.coinRequire("maxGoldCoin")}},[a("el-input",{attrs:{placeholder:"请输入"+t.$MAPS.task.labels.maxGoldCoin},model:{value:t.form.maxGoldCoin,callback:function(e){t.$set(t.form,"maxGoldCoin",t._n(e))},expression:"form.maxGoldCoin"}})],1)],1):t._e(),a("el-form-item",{attrs:{prop:"supportAppMinVersion",label:"最低支持版本"}},[a("el-input",{attrs:{placeholder:"如：1.0.1"},model:{value:t.form.supportAppMinVersion,callback:function(e){t.$set(t.form,"supportAppMinVersion","string"===typeof e?e.trim():e)},expression:"form.supportAppMinVersion"}})],1),a("el-form-item",{attrs:{prop:"buttonTextBefore",label:t.$MAPS.task.labels.buttonTextBefore}},[a("el-input",{attrs:{placeholder:"请输入"+t.$MAPS.task.labels.buttonTextBefore},model:{value:t.form.buttonTextBefore,callback:function(e){t.$set(t.form,"buttonTextBefore",e)},expression:"form.buttonTextBefore"}})],1),a("el-form-item",{attrs:{prop:"buttonTextAfter",label:t.$MAPS.task.labels.buttonTextAfter}},[a("el-input",{attrs:{placeholder:"请输入"+t.$MAPS.task.labels.buttonTextAfter},model:{value:t.form.buttonTextAfter,callback:function(e){t.$set(t.form,"buttonTextAfter",e)},expression:"form.buttonTextAfter"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:t.handleCancel}},[t._v("取 消")]),a("el-button",{attrs:{size:"small",type:"primary",loading:t.submitting},on:{click:t.handleOk}},[t._v("确 定")])],1)],1)},r=[],c=(a("4de4"),a("4160"),a("caad"),a("a9e3"),a("b64b"),a("2ca0"),a("159b"),a("01c2")),u={appId:null,id:null,name:"",code:"",remark:"",buttonTextBefore:"",buttonTextAfter:"",minGoldCoin:"",maxGoldCoin:"",supportAppMinVersion:"",sort:"",taskGroup:"",taskType:""},p={name:"taskPopup",components:{allApps:c["a"]},data:function(){return{dialogVisible:!1,submitting:!1,form:{appId:null,id:null,name:"",code:"",remark:"",buttonTextBefore:"",buttonTextAfter:"",minGoldCoin:"",maxGoldCoin:"",supportAppMinVersion:"",sort:"",taskGroup:"",taskType:""},formRules:{appId:[{required:!0,message:"请选择".concat(this.$MAPS.task.labels.appId)}],name:[{required:!0,message:"请填写".concat(this.$MAPS.task.labels.name)}],code:[{required:!0,message:"请填写".concat(this.$MAPS.task.labels.code)}],remark:[],minGoldCoin:[{validator:this.validCoin}],maxGoldCoin:[{validator:this.validCoin}],sort:[{validator:this.validSort}],taskGroup:[{required:!0,message:"请填写".concat(this.$MAPS.task.labels.taskGroup)}],taskType:[{required:!0,message:"请填写".concat(this.$MAPS.task.labels.taskType)}],supportAppMinVersion:[{required:!0,message:"请填写版本名称"}],buttonTextBefore:[],buttonTextAfter:[]}}},props:{visible:{type:Boolean},defaultAppId:{type:[String,Number],default:function(){return""}}},computed:{mode:function(){return this.form.id?"edit":"create"},taskCodeOptions:function(){var t=this,e="",a={},o=Object.keys(this.$MAPS.task.code);switch(this.form.taskGroup){case 0:e="N";break;case 1:e="D";break;case 2:e="S";break;case 3:e="V";break;case 4:e="C";break;case 5:e="L";break;default:}return e&&(o=o.filter((function(t){return t.startsWith(e)}))),o.forEach((function(e){a[e]=t.$MAPS.task.code[e]})),a}},methods:{resetPanel:function(){var t=this;Object.keys(this.form).forEach((function(e){t.form[e]=u[e],"create"===t.mode&&t.defaultAppId&&"appId"===e&&(t.form.appId=t.defaultAppId)})),this.$nextTick((function(){t.$refs.form.clearValidate()}))},handleCancel:function(){this.dialogVisible=!1},handleOk:function(){var t=this;this.$refs.form.validate((function(e){if(e){t.submitting=!0;var a=t.form.id?"updateTask":"addTask";l["a"][a](t.form).then((function(e){t.$emit("ok",!t.form.id),t.dialogVisible=!1})).finally((function(){t.submitting=!1}))}}))},fillData:function(t){var e=this;Object.keys(this.form).forEach((function(a){a in t&&null!==t[a]&&(e.form[a]=t[a])}))},validNumber:function(t,e,a){var o=/^\d+$/;o.test(e)?a():a(new Error("请输入数字"))},coinRequire:function(t){var e=[1,3,4,5].includes(this.form.taskType),a=[2,3].includes(this.form.taskGroup),o=e&&!a;return{required:o,message:"请填写".concat(this.$MAPS.task.labels[t])}},validCoin:function(t,e,a){var o=/^\d+$/;""===this.form.minGoldCoin&&""===this.form.maxGoldCoin||o.test(e)?a():a(new Error("请输入数字"))},validSort:function(t,e,a){""===e?a():this.validNumber(t,e,a)}},watch:{visible:{handler:function(t){this.dialogVisible=t},immediate:!0},dialogVisible:function(t){this.$emit("update:visible",t)}},created:function(){},mounted:function(){},destroyed:function(){}},d=p,f=(a("1b7f"),a("2877")),m=Object(f["a"])(d,n,r,!1,null,"ae1a3c5a",null),h=m.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.dialogVisible,width:"800px"},on:{"update:visible":function(e){t.dialogVisible=e},closed:t.resetPanel}},[a("template",{slot:"title"},[a("span",{staticClass:"el-dialog__title"},[t._v(" "+t._s("create"===t.mode?"添加":"修改")+"任务配置"+t._s(t.form.name?" ["+t.form.name+"]":"")+" "),t.form.id?a("span",{staticClass:"tips"},[t._v("(ID: "+t._s(t.form.id)+")")]):t._e()])]),0!==t.form.lists.length||t.loading?t._e():a("el-alert",{staticClass:"mb-gap-s",attrs:{type:"info",closable:!1,title:""}},[t._v("该任务还没有配置，请点击下方按钮添加配置")]),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"form",staticClass:"config-form",attrs:{"label-width":"40px",size:"small",model:t.form,disabled:t.loading,rules:t.formRules}},t._l(t.form.lists,(function(e,o){return a("el-form-item",{key:o,attrs:{label:""+(o+1),prop:"lists."+o,rules:[{validator:t.validConfig}]}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:"KEY"},model:{value:e.cKey,callback:function(a){t.$set(e,"cKey",a)},expression:"item.cKey"}})],1),a("el-col",{attrs:{span:14}},[a("el-input",{attrs:{placeholder:"VALUE"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}})],1),a("el-col",{attrs:{span:1}},[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.handleDel(o)}}},[a("i",{staticClass:"el-icon-delete"})])])],1)],1)})),1),a("div",{staticClass:"tc"},[a("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-plus"},on:{click:t.handleAdd}},[t._v("添加配置")])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:t.handleCancel}},[t._v("取 消")]),a("el-button",{attrs:{size:"small",type:"primary",loading:t.submitting,disabled:0===t.form.lists.length},on:{click:t.handleOk}},[t._v("确 定")])],1)],2)},k=[],g=(a("d81d"),a("a434"),{id:null,name:null,lists:[]}),v={name:"taskConfigPopup",components:{},data:function(){return{dialogVisible:!1,submitting:!1,loading:!1,form:{id:null,name:null,lists:[]},formRules:{name:[{required:!0,message:"请填写XXX"}]}}},props:{visible:{type:Boolean}},computed:{mode:function(){return this.form.id?"edit":"create"}},methods:{resetPanel:function(){var t=this;Object.keys(this.form).forEach((function(e){t.form[e]=g[e]})),this.$nextTick((function(){t.$refs.form.clearValidate()}))},handleCancel:function(){this.dialogVisible=!1},handleOk:function(){var t=this;this.$refs.form.validate((function(e){if(e){t.submitting=!0;var a=t.form.id?"updateConfig":"addConfig";l["a"][a](t.form).then((function(e){t.$emit("ok"),t.dialogVisible=!1})).finally((function(){t.submitting=!1}))}}))},handleAdd:function(){this.form.lists.push({cKey:"",value:""})},handleDel:function(t){this.form.lists.splice(t,1)},getConfig:function(t,e){var a=this;this.form.id=t,this.form.name=e,this.loading=!0,l["a"].getConfig(t).then((function(t){a.form.lists=t.map((function(t){return{cKey:t.cKey,value:t.value}}))})).finally((function(){a.loading=!1}))},validConfig:function(t,e,a){/\s/g.test(e.value)?a(new Error("VALUE不可包含空格")):e.cKey&&e.value?a():a(new Error("请输入完整的 KEY: VALUE 组合"))}},watch:{visible:{handler:function(t){this.dialogVisible=t},immediate:!0},dialogVisible:function(t){this.$emit("update:visible",t)}},created:function(){},mounted:function(){},destroyed:function(){}},y=v,C=(a("6740"),Object(f["a"])(y,b,k,!1,null,"59c12176",null)),A=C.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dialog-copy-task"},[a("el-tooltip",{attrs:{disabled:!0,content:"",placement:"top"}},[a("div",{staticClass:"copy-task-tooltip",attrs:{slot:"content"},slot:"content"}),a("div",{staticClass:"click-copy-task",on:{click:t.showDialogCopyTask}},[t._t("default")],2)]),a("el-dialog",{ref:"refDialogCopyTask",staticClass:"dialog-copy-task-box",attrs:{visible:t.dialogCopyTask},on:{closed:t.resetCopyTask,"update:visible":function(e){t.dialogCopyTask=e}}},[a("template",{slot:"title"},[a("span",{staticClass:"el-dialog__title"},[t._v(" 一键复制 ")])]),a("section",{directives:[{name:"loading",rawName:"v-loading",value:t.requesting,expression:"requesting"}],staticClass:"copy-task-box"},[a("el-form",{ref:"refFormCopyTask",staticClass:"copy-task-form",attrs:{model:t.formCopyTask,rules:t.formCopyTask.rules},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{"label-width":t.formCopyTask.labelWidth,prop:"sourceAppId"}},[a("allApps",{attrs:{placeholder:"请选择要复制的应用"},model:{value:t.formCopyTask.sourceAppId,callback:function(e){t.$set(t.formCopyTask,"sourceAppId",e)},expression:"formCopyTask.sourceAppId"}})],1),a("div",{staticClass:"copy-task-icon"},[a("i",{staticClass:"el-icon-right"})]),a("el-form-item",{attrs:{"label-width":t.formCopyTask.labelWidth,prop:"targetAppId"}},[a("allApps",{model:{value:t.formCopyTask.targetAppId,callback:function(e){t.$set(t.formCopyTask,"targetAppId",e)},expression:"formCopyTask.targetAppId"}})],1)],1)],1),a("div",{staticClass:"copy-task-footer"},[a("div",{staticClass:"copy-task-btn"},[a("el-button",{attrs:{size:"small"},on:{click:t.cancelCopyTask}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:t.requesting,size:"small"},on:{click:t.confirmCopyTask}},[t._v("确 定")])],1)])],2)],1)},T=[],w={name:"DialogCopyTask",props:{defaultAppId:{type:[String,Number],default:function(){return""}}},data:function(){return{dialogCopyTask:!1,requesting:!1,formCopyTask:{labelWidth:"120px",sourceAppId:"",targetAppId:"",rules:{sourceAppId:[{required:!0,message:"请选择要复制的应用"}],targetAppId:[{required:!0,message:"请选择应用"}]}}}},methods:{showDialogCopyTask:function(){this.dialogCopyTask=!0,this.formCopyTask.targetAppId=this.defaultAppId},cancelCopyTask:function(){this.dialogCopyTask=!1},resetCopyTask:function(){this.formCopyTask.sourceAppId="",this.formCopyTask.targetAppId="",this.$refs.refFormCopyTask&&this.$refs.refFormCopyTask.resetFields()},confirmCopyTask:function(){var t=this;this.$refs.refFormCopyTask&&this.$refs.refFormCopyTask.validate((function(e){if(e){if(t.requesting)return;t.requesting=!0,l["a"].requestCopyTask(t.formCopyTask).then((function(){t.$emit("ok"),t.$message({message:"复制成功",type:"success"}),t.dialogCopyTask=!1})).catch((function(){})).finally((function(){t.requesting=!1}))}}))}}},S=w,x=(a("33d2"),a("d616"),Object(f["a"])(S,$,T,!1,null,"20493860",null)),_=x.exports,P={name:"Task",components:{editPopup:h,configPopup:A,DialogCopyTask:_},mixins:[i["a"]],data:function(){return{showEditPopup:!1,showConfigPopup:!1,query:{appId:this.$store.state.apps.activeAppId}}},props:{},computed:{writeAble:function(){return this.$HAS_PERMISSION("mango:task:w")}},methods:{search:function(t){var e=this;this.tableLoading||(this.query.appId?(t&&(this.query.pageNum=1),this.tableLoading=!0,l["a"].getList(this.query).then((function(t){e.total=t.total,e.tableData=t.lists})).finally((function(){e.tableLoading=!1}))):this.$message({type:"warning",message:"请先选择产品"}))},handleAdd:function(){this.showEditPopup=!0,this.$refs.editPopup.resetPanel()},handleEdit:function(t){this.$refs.editPopup.fillData(t),this.showEditPopup=!0},handleConfig:function(t){this.$refs.configPopup.getConfig(t.id,t.name),this.showConfigPopup=!0},handleDel:function(t){var e=this;this.$set(t,"_deleting",!0),l["a"].delTask(t.id).then((function(t){var a=e.query.pageNum;1===e.tableData.length&&(e.query.pageNum=a-1||1),e.search()})).finally((function(){e.$set(t,"_deleting",!1)}))}},watch:{},created:function(){this.search(!0)},mounted:function(){},destroyed:function(){}},M=P,q=Object(f["a"])(M,o,s,!1,null,"6f285f3c",null);e["default"]=q.exports},2895:function(t,e,a){},"2ba7":function(t,e,a){},"2ca0":function(t,e,a){"use strict";var o=a("23e7"),s=a("06cf").f,i=a("50c4"),l=a("5a34"),n=a("1d80"),r=a("ab13"),c=a("c430"),u="".startsWith,p=Math.min,d=r("startsWith"),f=!c&&!d&&!!function(){var t=s(String.prototype,"startsWith");return t&&!t.writable}();o({target:"String",proto:!0,forced:!f&&!d},{startsWith:function(t){var e=String(n(this));l(t);var a=i(p(arguments.length>1?arguments[1]:void 0,e.length)),o=String(t);return u?u.call(e,o,a):e.slice(a,a+o.length)===o}})},"33d2":function(t,e,a){"use strict";var o=a("c52a"),s=a.n(o);s.a},"619b":function(t,e,a){"use strict";a("ac1f"),a("841c");var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"do-pagination"},[a("el-pagination",t._g(t._b({attrs:{layout:t.layout,background:t.background}},"el-pagination",t.$attrs,!1),t.$listeners))],1)},s=[],i={name:"BasePagination",components:{},inheritAttrs:!1,data:function(){return{}},props:{background:{default:!0},layout:{default:"total, prev, pager, next,jumper, sizes"}},computed:{},methods:{handlePnChange:function(t){this.$emit("current-change",t)},handleSizeChange:function(t){this.$emit("size-change",t)}},watch:{},created:function(){},mounted:function(){},destroyed:function(){}},l=i,n=a("2877"),r=Object(n["a"])(l,o,s,!1,null,null,null),c=r.exports;e["a"]={components:{BasePagination:c},data:function(){var t,e,a={prop:"id",order:"descending"},o=["descending","ascending",null];return{defaultSort:a,defaultSortOrders:o,tableLoading:!1,query:{pageNum:1,pageSize:(null===this||void 0===this||null===(t=this.$store)||void 0===t||null===(e=t.state)||void 0===e?void 0:e.pageSize)||20,orderBy:a.prop,sequence:a.order},total:0,tableData:[]}},methods:{handlePnChange:function(t){this.query.pageNum=t,this.search()},handleSizeChange:function(t){this.query.pageSize=t,this.$store.commit("setPageSize",t),this.search&&this.search(!0)},handleSortChange:function(t){var e=t.prop,a=t.order;this.query.orderBy=e,this.query.sequence=a,this.search(!0)}}}},6740:function(t,e,a){"use strict";var o=a("2895"),s=a.n(o);s.a},"841c":function(t,e,a){"use strict";var o=a("d784"),s=a("825a"),i=a("1d80"),l=a("129f"),n=a("14c3");o("search",1,(function(t,e,a){return[function(e){var a=i(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,a):new RegExp(e)[t](String(a))},function(t){var o=a(e,t,this);if(o.done)return o.value;var i=s(t),r=String(this),c=i.lastIndex;l(c,0)||(i.lastIndex=0);var u=n(i,r);return l(i.lastIndex,c)||(i.lastIndex=c),null===u?-1:u.index}]}))},a434:function(t,e,a){"use strict";var o=a("23e7"),s=a("23cb"),i=a("a691"),l=a("50c4"),n=a("7b0b"),r=a("65f0"),c=a("8418"),u=a("1dde"),p=a("ae40"),d=u("splice"),f=p("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,h=Math.min,b=9007199254740991,k="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!d||!f},{splice:function(t,e){var a,o,u,p,d,f,g=n(this),v=l(g.length),y=s(t,v),C=arguments.length;if(0===C?a=o=0:1===C?(a=0,o=v-y):(a=C-2,o=h(m(i(e),0),v-y)),v+a-o>b)throw TypeError(k);for(u=r(g,o),p=0;p<o;p++)d=y+p,d in g&&c(u,p,g[d]);if(u.length=o,a<o){for(p=y;p<v-o;p++)d=p+o,f=p+a,d in g?g[f]=g[d]:delete g[f];for(p=v;p>v-o+a;p--)delete g[p-1]}else if(a>o)for(p=v-o;p>y;p--)d=p+o-1,f=p+a-1,d in g?g[f]=g[d]:delete g[f];for(p=0;p<a;p++)g[p+y]=arguments[p+2];return g.length=v-o+a,u}})},c32f:function(t,e,a){},c52a:function(t,e,a){},d616:function(t,e,a){"use strict";var o=a("2ba7"),s=a.n(o);s.a}}]);