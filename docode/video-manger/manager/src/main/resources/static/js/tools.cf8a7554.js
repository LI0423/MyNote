(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["tools"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"180b":function(e,t,a){},"28f5":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("div",{staticClass:"do-card",staticStyle:{margin:"0 auto",width:"800px"}},[e._m(0),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"bd"},[a("el-alert",{staticClass:"mb-gap-s",attrs:{type:"warning","show-icon":"",closable:!1,title:"注意事项"}},[e._v(" 此功能会针对指定用户做「金币清零」操作，请谨慎操作！ ")]),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户ID",prop:"user_id"}},[a("el-input",{model:{value:e.form.user_id,callback:function(t){e.$set(e.form,"user_id",t)},expression:"form.user_id"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v(" 提交 ")])],1)],1)],1)])])},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hd bordered"},[a("h3",{staticClass:"title"},[e._v("金币清零")])])}],i=(a("d3b7"),{name:"clearData",components:{},data:function(){return{loading:!1,form:{token:"4edd5576a3dbb162ff27ada75aff915c",user_id:"",account:this.$USER_NAME},formRules:{user_id:[{required:!0,message:"请填写用户ID"}]}}},props:{},computed:{},methods:{submit:function(){var e=this;this.$refs.form.validate((function(t){var a=location.port?"http://10.29.9.183:8087":"http://hb.woodgamestudio.com";t&&(e.loading=!0,e.$axios.get("".concat(a,"/netearn/operate/delete"),{params:e.form}).then((function(t){e.$message({type:"success",message:"清零成功！"})})).finally((function(){e.loading=!1})))}))}},watch:{},created:function(){},mounted:function(){},destroyed:function(){}}),s=i,r=a("2877"),l=Object(r["a"])(s,n,o,!1,null,"3db24e20",null);t["default"]=l.exports},"48c3":function(e,t,a){},"54fe":function(e,t,a){"use strict";var n=a("180b"),o=a.n(n);o.a},"619b":function(e,t,a){"use strict";a("ac1f"),a("841c");var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"do-pagination"},[a("el-pagination",e._g(e._b({attrs:{layout:e.layout,background:e.background}},"el-pagination",e.$attrs,!1),e.$listeners))],1)},o=[],i={name:"BasePagination",components:{},inheritAttrs:!1,data:function(){return{}},props:{background:{default:!0},layout:{default:"total, prev, pager, next,jumper, sizes"}},computed:{},methods:{handlePnChange:function(e){this.$emit("current-change",e)},handleSizeChange:function(e){this.$emit("size-change",e)}},watch:{},created:function(){},mounted:function(){},destroyed:function(){}},s=i,r=a("2877"),l=Object(r["a"])(s,n,o,!1,null,null,null),c=l.exports;t["a"]={components:{BasePagination:c},data:function(){var e,t,a={prop:"id",order:"descending"},n=["descending","ascending",null];return{defaultSort:a,defaultSortOrders:n,tableLoading:!1,query:{pageNum:1,pageSize:(null===this||void 0===this||null===(e=this.$store)||void 0===e||null===(t=e.state)||void 0===t?void 0:t.pageSize)||20,orderBy:a.prop,sequence:a.order},total:0,tableData:[]}},methods:{handlePnChange:function(e){this.query.pageNum=e,this.search()},handleSizeChange:function(e){this.query.pageSize=e,this.$store.commit("setPageSize",e),this.search&&this.search(!0)},handleSortChange:function(e){var t=e.prop,a=e.order;this.query.orderBy=t,this.query.sequence=a,this.search(!0)}}}},"62f8":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"clear-user"},[a("div",{staticClass:"do-card",staticStyle:{margin:"0 auto",width:"800px"}},[e._m(0),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"bd"},[a("el-alert",{staticClass:"mb-gap-s",attrs:{type:"warning","show-icon":"",closable:!1,title:"注意事项"}},[e._v(" 此功能会针对指定token的用户做「数据清除」操作，请谨慎操作！ ")]),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"用户TOKEN",prop:"accessToken"}},[a("el-input",{model:{value:e.form.accessToken,callback:function(t){e.$set(e.form,"accessToken",t)},expression:"form.accessToken"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v(" 提交 ")])],1)],1)],1)])])},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hd bordered"},[a("h3",{staticClass:"title"},[e._v("用户数据清除")])])}],i=(a("d3b7"),function(e){var t=e.accessToken;return window.axios.delete("/user",{params:{accessToken:t}})}),s={name:"ClearUser",components:{},data:function(){return{loading:!1,form:{accessToken:"",account:this.$USER_NAME},formRules:{accessToken:[{required:!0,message:"请填写用户TOKEN"}]}}},methods:{submit:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.loading=!0,i(e.form).then((function(t){e.$message({type:"success",message:"用户数据清除成功！"}),e.clearForm()})).finally((function(){e.loading=!1})))}))},clearForm:function(){var e=this;this.form.accessToken="",this.$nextTick((function(){e.$refs.form&&e.$refs.form.clearValidate()}))}}},r=s,l=(a("54fe"),a("2877")),c=Object(l["a"])(r,n,o,!1,null,"228fe284",null);t["default"]=c.exports},"841c":function(e,t,a){"use strict";var n=a("d784"),o=a("825a"),i=a("1d80"),s=a("129f"),r=a("14c3");n("search",1,(function(e,t,a){return[function(t){var a=i(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,a):new RegExp(t)[e](String(a))},function(e){var n=a(t,e,this);if(n.done)return n.value;var i=o(e),l=String(this),c=i.lastIndex;s(c,0)||(i.lastIndex=0);var d=r(i,l);return s(i.lastIndex,c)||(i.lastIndex=c),null===d?-1:d.index}]}))},a729:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("h1",{staticClass:"main-title"},[e._v("用户黑名单")]),a("div",{staticClass:"do-card",staticStyle:{margin:"0 auto 24px",width:"800px"}},[e._m(0),a("div",{staticClass:"bd"},[a("blockForm",{on:{success:function(t){return e.search(!0)}}})],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"table-wrap do-card"},[a("div",{staticClass:"hd bordered flex"},[a("h3",{staticClass:"title"},[e._v("用户列表")]),a("el-button",{attrs:{type:"primary",plain:"",size:"small",icon:"el-icon-refresh"},on:{click:function(t){return e.search(!0)}}},[e._v("刷新表格")])],1),a("div",{staticClass:"bd"},[a("el-table",{staticClass:"hide-border",attrs:{data:e.tableData,border:"","default-sort":{prop:e.defaultSort.prop,order:e.defaultSort.order}}},[a("el-table-column",{attrs:{label:"用户ID",prop:"userId",width:"180","show-overflow-tooltip":"",sortable:""}}),a("el-table-column",{attrs:{label:"用户昵称",prop:"name","min-width":"150","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"产品",prop:"pkg","min-width":"130","show-overflow-tooltip":"",sortable:"","class-name":"name-slot-cell"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",{staticClass:"name"},[e._v(e._s(n.pkgName))]),a("div",{staticClass:"id"},[e._v(e._s(n.pkg))])]}}])}),a("el-table-column",{attrs:{label:"封禁时间","min-width":"120",align:"right","show-overflow-tooltip":"",sortable:"",prop:"createTime"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("date")(a.createTime,"dateTime"))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",prop:"",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{size:"mini",type:"success",plain:""},on:{click:function(t){return e.showDetail(n.userId)}}},[e._v("查看详情")])]}}])})],1)],1)]),a("dialogBlockUserDetail",{ref:"dialogBlockUserDetail"})],1)},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hd bordered"},[a("h3",{staticClass:"title"},[e._v("添加用户")])])}],i=(a("d3b7"),a("ac1f"),a("841c"),a("619b")),s=function(e){return window.axios.post("/user/black",e)},r=function(e){return window.axios.get("/user/black",{params:e})},l=function(e){return window.axios.get("/user/black/".concat(e))},c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-alert",{staticClass:"mb-gap-s",attrs:{type:"info","show-icon":"",closable:!1,title:"注意事项"}},[e._v(" 此功能会封禁指定token的用户，封禁后不可提现。请谨慎操作！ ")]),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"用户TOKEN",prop:"token"}},[a("el-input",{model:{value:e.form.token,callback:function(t){e.$set(e.form,"token",t)},expression:"form.token"}})],1),a("el-form-item",{attrs:{label:"封禁原因",prop:"desc"}},[a("el-input",{model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v(" 提交 ")])],1)],1)],1)},d=[],u={name:"blockUserForm",components:{},data:function(){return{loading:!1,form:{token:"",desc:""},formRules:{token:[{required:!0,message:"请填写用户TOKEN"}]}}},props:{},computed:{},methods:{submit:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.loading=!0,s(e.form).then((function(t){e.$emit("success"),e.$message({type:"success",message:"添加黑名单成功！"}),e.clearForm()})).finally((function(){e.loading=!1})))}))},clearForm:function(){var e=this;this.form.token="",this.form.desc="",this.$nextTick((function(){e.$refs.form&&e.$refs.form.clearValidate()}))}},watch:{},created:function(){},mounted:function(){},destroyed:function(){}},f=u,m=a("2877"),p=Object(m["a"])(f,c,d,!1,null,"28d2b5eb",null),h=p.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"用户详情",visible:e.dialogVisible,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.resetPanel}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"用户ID"}},[e._v(e._s(e.form.userId))]),a("el-form-item",{attrs:{label:"昵称"}},[e._v(e._s(e.form.name))]),a("el-form-item",{attrs:{label:"封禁原因"}},[e._v(e._s(e.form.desc))]),a("el-form-item",{attrs:{label:"Token列表"}},[a("div",{staticClass:"tag-list"},e._l(e.form.token,(function(t,n){return a("el-tag",{key:n,attrs:{size:"mini",type:"info","disable-transition":""}},[e._v(e._s(t))])})),1)])],1)],1)},v=[],g=(a("4160"),a("d81d"),a("b64b"),a("1276"),a("159b"),{name:"dialogBlockUserDetail",components:{},data:function(){return{dialogVisible:!1,loading:!1,form:{userId:"",name:"",pkg:"",pkgName:"",token:[],desc:""}}},props:{},computed:{},methods:{resetPanel:function(){this.fillForm({userId:"",name:"",pkg:"",pkgName:"",token:"",desc:""})},show:function(e){e&&(this.getUserDetail(e),this.dialogVisible=!0)},getUserDetail:function(e){var t=this;this.loading=!0,l(e).then((function(e){t.fillForm(e)})).finally((function(e){t.loading=!1}))},fillForm:function(e){var t=this;Object.keys(this.form).forEach((function(a){if(a in e&&void 0!==e[a])switch(a){case"token":t.form[a]=(e[a]||"").split(",").map((function(e){return!e}));break;default:t.form[a]=e[a]}}))}},watch:{},created:function(){},mounted:function(){},destroyed:function(){}}),k=g,_=(a("bb97"),Object(m["a"])(k,b,v,!1,null,"1188abe9",null)),w=_.exports,y={name:"blockUser",components:{blockForm:h,dialogBlockUserDetail:w},mixins:[i["a"]],data:function(){var e={prop:"",order:null};return{defaultSort:e}},props:{},computed:{},methods:{search:function(e){var t=this;this.tableLoading=!0,r({t:Date.now()}).then((function(e){t.tableData=e||[]})).finally((function(){t.tableLoading=!1}))},showDetail:function(e){this.$refs.dialogBlockUserDetail.show(e)}},watch:{},created:function(){},mounted:function(){this.search(!0)},destroyed:function(){}},x=y,$=Object(m["a"])(x,n,o,!1,null,"5427ee38",null);t["default"]=$.exports},bb97:function(e,t,a){"use strict";var n=a("48c3"),o=a.n(n);o.a}}]);