# RPC

## 什么是RPC

RPC（Remote Procedure Call）即远程过程调用。

## RPC原理

1. 客户端（服务消费端）：调用远程方法的一端。
2. 客户端Stub（桩）：一个代理类。代理类主要做的是把调用方法、类、方法参数等信息传递到服务端。
3. 网络传输：把要调用的方法的信息传输到服务端，然后服务端执行完之后把返回结果通过网络传输回来。
4. 服务端Stub（桩）：这个桩不是代理类。接收到客户端执行方法的请求后，去执行对应的方法然后返回结果给客户端的类。
5. 服务端（服务提供端）：提供远程方法的一端。

### RCP流程

1. 服务消费端（client）以本地调用的方式调用远程服务。
2. 客户端Stub（client stub）接收到调用后负责将方法、参数等组装成能够进行网络传输的消息体（序列化）：RpcRequest。
3. 客户端Stub（client stub）找到远程服务的地址，并将消息发送到服务提供端。
4. 服务端Stub（桩）收到消息将消息反序列化为Java对象：RpcRequest。
5. 服务端Stub（桩）根据RpcRequest中的类、方法、方法参数等信息调用本地的方法。
6. 服务端Stub（桩）得到方法执行结果并将组装成能够进行网络传输的消息体：RpcResponse（序列化）发送至消费方。
7. 客户端Stub（client stub）接收到消息并将消息反序列化为Java对象：RpcResponse，得到最终的结果。
