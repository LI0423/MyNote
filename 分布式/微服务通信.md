# 微服务通信

## 同步

### REST HTTP协议

REST请求在微服务中是最为常用的一种通讯方式，依赖于HTTP/HTTPS协议。特点是：

1. 每个URI代表1中资源。
2. 客户端使用GET、POST、PUT、DELETE 4个表示操作方式的动词对服务端资源进行操作：GET用来获取资源，POST用来新建资源（也可用于更新资源），PUT用来更新资源，DELETE用来删除资源。
3. 通过操作资源的表现形式来操作资源。
4. 资源的表现形式是XML或者HTML。
5. 客户端与服务端之间的交互在请求之间是无状态的，从客户端到服务端的每个请求都必须包括理解请求所必须的信息。

### RPC TCP协议

RPC（Remote Procedure Call）远程过程调用，就是一个节点请求另一个节点提供的服务。工作流程是：

1. 执行客户端调用语句，传送参数。
2. 调用本地系统发送网络消息。
3. 消息传送到远程主机。
4. 服务器得到消息并取得参数。
5. 根据调用请求以及参数执行远程过程。
6. 执行过程完毕，将结果返回服务器句柄。
7. 服务器句柄返回结果，调用远程主机的系统网络服务发送结果。
8. 消息传回本地主机。
9. 客户端句柄由本地主机的网络服务接收消息。
10. 客户端接收到调用语句返回的结果数据。

## 异步

### 消息中间件

常见的消息中间件Kafka、ActiveMQ、RabbitMQ、RocketMQ，常见的协议有AMQP、MQTTP、STOMP、XMPP。
